aws ec2 create-vpc --cidr-block "10.10.0.0/17" --instance-tenancy "default" --tag-specifications '{"resourceType":"vpc","tags":[{"key":"Name","value":"npe-vpc-vpc"}]}'
aws ec2 modify-vpc-attribute --vpc-id "preview-vpc-1234" --enable-dns-hostnames '{"value":true}'
aws ec2 describe-vpcs --vpc-ids "preview-vpc-1234"
aws ec2 create-vpc-endpoint --vpc-id "preview-vpc-1234" --service-name "com.amazonaws.us-east-1.s3" --tag-specifications '{"resourceType":"vpc-endpoint","tags":[{"key":"Name","value":"npe-vpc-vpce-s3"}]}'
aws ec2 create-subnet --vpc-id "preview-vpc-1234" --cidr-block "10.10.0.0/21" --availability-zone "us-east-1a" --tag-specifications '{"resourceType":"subnet","tags":[{"key":"Name","value":"npe-vpc-subnet-public1-us-east-1a"}]}'
aws ec2 create-subnet --vpc-id "preview-vpc-1234" --cidr-block "10.10.8.0/21" --availability-zone "us-east-1b" --tag-specifications '{"resourceType":"subnet","tags":[{"key":"Name","value":"npe-vpc-subnet-public2-us-east-1b"}]}'
aws ec2 create-subnet --vpc-id "preview-vpc-1234" --cidr-block "10.10.16.0/21" --availability-zone "us-east-1c" --tag-specifications '{"resourceType":"subnet","tags":[{"key":"Name","value":"npe-vpc-subnet-public3-us-east-1c"}]}'
aws ec2 create-subnet --vpc-id "preview-vpc-1234" --cidr-block "10.10.64.0/21" --availability-zone "us-east-1a" --tag-specifications '{"resourceType":"subnet","tags":[{"key":"Name","value":"npe-vpc-subnet-private1-us-east-1a"}]}'
aws ec2 create-subnet --vpc-id "preview-vpc-1234" --cidr-block "10.10.72.0/21" --availability-zone "us-east-1b" --tag-specifications '{"resourceType":"subnet","tags":[{"key":"Name","value":"npe-vpc-subnet-private2-us-east-1b"}]}'
aws ec2 create-subnet --vpc-id "preview-vpc-1234" --cidr-block "10.10.80.0/21" --availability-zone "us-east-1c" --tag-specifications '{"resourceType":"subnet","tags":[{"key":"Name","value":"npe-vpc-subnet-private3-us-east-1c"}]}'
aws ec2 create-internet-gateway --tag-specifications '{"resourceType":"internet-gateway","tags":[{"key":"Name","value":"npe-vpc-igw"}]}'
aws ec2 attach-internet-gateway --internet-gateway-id "preview-igw-1234" --vpc-id "preview-vpc-1234"
aws ec2 create-route-table --vpc-id "preview-vpc-1234" --tag-specifications '{"resourceType":"route-table","tags":[{"key":"Name","value":"npe-vpc-rtb-public"}]}'
aws ec2 create-route --route-table-id "preview-rtb-public-0" --destination-cidr-block "0.0.0.0/0" --gateway-id "preview-igw-1234"
aws ec2 associate-route-table --route-table-id "preview-rtb-public-0" --subnet-id "preview-subnet-public-0"
aws ec2 associate-route-table --route-table-id "preview-rtb-public-0" --subnet-id "preview-subnet-public-1"
aws ec2 associate-route-table --route-table-id "preview-rtb-public-0" --subnet-id "preview-subnet-public-2"
aws ec2 allocate-address --domain "vpc" --tag-specifications '{"resourceType":"elastic-ip","tags":[{"key":"Name","value":"npe-vpc-eip-us-east-1a"}]}'
aws ec2 allocate-address --domain "vpc" --tag-specifications '{"resourceType":"elastic-ip","tags":[{"key":"Name","value":"npe-vpc-eip-us-east-1b"}]}'
aws ec2 allocate-address --domain "vpc" --tag-specifications '{"resourceType":"elastic-ip","tags":[{"key":"Name","value":"npe-vpc-eip-us-east-1c"}]}'
aws ec2 create-nat-gateway --subnet-id "preview-subnet-public-0" --allocation-id "preview-eipalloc-0" --tag-specifications '{"resourceType":"natgateway","tags":[{"key":"Name","value":"npe-vpc-nat-public1-us-east-1a"}]}'
aws ec2 create-nat-gateway --subnet-id "preview-subnet-public-1" --allocation-id "preview-eipalloc-1" --tag-specifications '{"resourceType":"natgateway","tags":[{"key":"Name","value":"npe-vpc-nat-public2-us-east-1b"}]}'
aws ec2 create-nat-gateway --subnet-id "preview-subnet-public-2" --allocation-id "preview-eipalloc-2" --tag-specifications '{"resourceType":"natgateway","tags":[{"key":"Name","value":"npe-vpc-nat-public3-us-east-1c"}]}'
aws ec2 describe-nat-gateways --nat-gateway-ids "preview-nat-0" "preview-nat-1" "preview-nat-2" --filter '{"Name":"state","Values":["available"]}'
aws ec2 create-route-table --vpc-id "preview-vpc-1234" --tag-specifications '{"resourceType":"route-table","tags":[{"key":"Name","value":"npe-vpc-rtb-private1-us-east-1a"}]}'
aws ec2 create-route --route-table-id "preview-rtb-private-1" --destination-cidr-block "0.0.0.0/0" --nat-gateway-id "preview-nat-0"
aws ec2 associate-route-table --route-table-id "preview-rtb-private-1" --subnet-id "preview-subnet-private-3"
aws ec2 create-route-table --vpc-id "preview-vpc-1234" --tag-specifications '{"resourceType":"route-table","tags":[{"key":"Name","value":"npe-vpc-rtb-private2-us-east-1b"}]}'
aws ec2 create-route --route-table-id "preview-rtb-private-2" --destination-cidr-block "0.0.0.0/0" --nat-gateway-id "preview-nat-1"
aws ec2 associate-route-table --route-table-id "preview-rtb-private-2" --subnet-id "preview-subnet-private-4"
aws ec2 create-route-table --vpc-id "preview-vpc-1234" --tag-specifications '{"resourceType":"route-table","tags":[{"key":"Name","value":"npe-vpc-rtb-private3-us-east-1c"}]}'
aws ec2 create-route --route-table-id "preview-rtb-private-3" --destination-cidr-block "0.0.0.0/0" --nat-gateway-id "preview-nat-2"
aws ec2 associate-route-table --route-table-id "preview-rtb-private-3" --subnet-id "preview-subnet-private-5"
aws ec2 describe-route-tables --route-table-ids    "preview-rtb-private-1" "preview-rtb-private-2" "preview-rtb-private-3"
aws ec2 modify-vpc-endpoint --vpc-endpoint-id "preview-vpce-1234" --add-route-table-ids "preview-rtb-private-1" "preview-rtb-private-2" "preview-rtb-private-3"
